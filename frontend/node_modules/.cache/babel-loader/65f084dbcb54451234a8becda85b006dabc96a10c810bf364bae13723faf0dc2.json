{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[board,setBoard]=useState([]);const[selected,setSelected]=useState(null);const[turn,setTurn]=useState(\"W\");const[legalMoves,setLegalMoves]=useState([]);const[gameOver,setGameOver]=useState(null);const[error,setError]=useState(null);useEffect(()=>{axios.get(`${process.env.REACT_APP_API_URL}/start`).then(res=>{setBoard(res.data.board);setTurn(res.data.turn);});},[]);const handleClick=(r,c)=>{if(gameOver)return;if(!selected){const clicked=board[r][c];if(clicked&&isWhitePiece(clicked)&&turn===\"W\"){setSelected([r,c]);axios.post(`${process.env.REACT_APP_API_URL}/legal-moves`,{r:[r,c]}).then(res=>{setLegalMoves(res.data.moves);});}}else{const[r1,c1]=selected;axios.post(`${process.env.REACT_APP_API_URL}/move`,{r1,c1,r2:r,c2:c}).then(res=>{setBoard(res.data.board);setTurn(res.data.turn);setGameOver(res.data.gameOver);setSelected(null);setLegalMoves([]);if(res.data.turn===\"B\"&&!res.data.gameOver){setTimeout(()=>{axios.post(`${process.env.REACT_APP_API_URL}/ai-move`).then(res2=>{setBoard(res2.data.board);setTurn(res2.data.turn);setGameOver(res2.data.gameOver);});},400);}}).catch(()=>{setError(\"Invalid move! Try a legal one.\");setTimeout(()=>setError(null),3000);setSelected(null);setLegalMoves([]);});}};const isWhitePiece=symbol=>{return[\"‚ôî\",\"‚ôï\",\"‚ôñ\",\"‚ôó\",\"‚ôò\",\"‚ôô\"].includes(symbol);};return/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome to Deepthi's chess\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{axios.get(`${process.env.REACT_APP_API_URL}/start`).then(res=>{setBoard(res.data.board);setTurn(res.data.turn);setGameOver(null);setSelected(null);setLegalMoves([]);});},className:\"reset-button\",children:\"Reset Game\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-toast\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"board\",children:[/*#__PURE__*/_jsx(\"div\",{className:`overlay ${gameOver?\"active\":\"\"}`,children:gameOver&&/*#__PURE__*/_jsx(\"div\",{className:`${turn===\"W\"?\"game-over\":\"game-win\"}`,children:gameOver===\"checkmate\"?turn===\"W\"?\"You lost! üíÄ\":\"You won! üéâ\":\"Stalemate! It's a draw ü§ù\"})}),board.map((row,rIdx)=>row.map((cell,cIdx)=>/*#__PURE__*/_jsx(\"div\",{className:`cell ${(rIdx+cIdx)%2===0?\"light\":\"dark\"} ${legalMoves.some(_ref=>{let[lr,lc]=_ref;return lr===rIdx&&lc===cIdx;})?// ||\n// (selected?.length > 0 &&\n//   selected[0] === rIdx &&\n//   selected[1] === cIdx)\n\"highlight\":\"\"}`,onClick:()=>handleClick(rIdx,cIdx),children:cell!==\".\"&&/*#__PURE__*/_jsx(\"span\",{className:`${isWhitePiece(cell)?\"white-piece\":\"black-piece\"} ${(selected===null||selected===void 0?void 0:selected.length)>0&&selected[0]===rIdx&&selected[1]===cIdx?\"selected-piece\":\"\"}`,children:cell})},`${rIdx}-${cIdx}`)))]})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","App","board","setBoard","selected","setSelected","turn","setTurn","legalMoves","setLegalMoves","gameOver","setGameOver","error","setError","get","process","env","REACT_APP_API_URL","then","res","data","handleClick","r","c","clicked","isWhitePiece","post","moves","r1","c1","r2","c2","setTimeout","res2","catch","symbol","includes","className","children","onClick","map","row","rIdx","cell","cIdx","some","_ref","lr","lc","length"],"sources":["C:/Users/mulge/Documents/Chessgame/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./App.css\";\n\nfunction App() {\n  const [board, setBoard] = useState([]);\n  const [selected, setSelected] = useState(null);\n  const [turn, setTurn] = useState(\"W\");\n\n  const [legalMoves, setLegalMoves] = useState([]);\n  const [gameOver, setGameOver] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    axios.get(`${process.env.REACT_APP_API_URL}/start`).then((res) => {\n      setBoard(res.data.board);\n      setTurn(res.data.turn);\n    });\n  }, []);\n\n  const handleClick = (r, c) => {\n    if (gameOver) return;\n\n    if (!selected) {\n      const clicked = board[r][c];\n      if (clicked && isWhitePiece(clicked) && turn === \"W\") {\n        setSelected([r, c]);\n        axios\n          .post(`${process.env.REACT_APP_API_URL}/legal-moves`, { r: [r, c] })\n          .then((res) => {\n            setLegalMoves(res.data.moves);\n          });\n      }\n    } else {\n      const [r1, c1] = selected;\n      axios\n        .post(`${process.env.REACT_APP_API_URL}/move`, { r1, c1, r2: r, c2: c })\n        .then((res) => {\n          setBoard(res.data.board);\n          setTurn(res.data.turn);\n          setGameOver(res.data.gameOver);\n          setSelected(null);\n          setLegalMoves([]);\n\n          if (res.data.turn === \"B\" && !res.data.gameOver) {\n            setTimeout(() => {\n              axios\n                .post(`${process.env.REACT_APP_API_URL}/ai-move`)\n                .then((res2) => {\n                  setBoard(res2.data.board);\n                  setTurn(res2.data.turn);\n                  setGameOver(res2.data.gameOver);\n                });\n            }, 400);\n          }\n        })\n        .catch(() => {\n          setError(\"Invalid move! Try a legal one.\");\n          setTimeout(() => setError(null), 3000);\n          setSelected(null);\n          setLegalMoves([]);\n        });\n    }\n  };\n\n  const isWhitePiece = (symbol) => {\n    return [\"‚ôî\", \"‚ôï\", \"‚ôñ\", \"‚ôó\", \"‚ôò\", \"‚ôô\"].includes(symbol);\n  };\n\n  return (\n    <div className=\"wrapper\">\n      <h1>Welcome to Deepthi's chess</h1>\n      <button\n        onClick={() => {\n          axios.get(`${process.env.REACT_APP_API_URL}/start`).then((res) => {\n            setBoard(res.data.board);\n            setTurn(res.data.turn);\n            setGameOver(null);\n            setSelected(null);\n            setLegalMoves([]);\n          });\n        }}\n        className=\"reset-button\"\n      >\n        Reset Game\n      </button>\n      {error && <div className=\"error-toast\">{error}</div>}\n\n      <div className=\"board\">\n        {/* overlay */}\n        <div className={`overlay ${gameOver ? \"active\" : \"\"}`}>\n          {gameOver && (\n            <div className={`${turn === \"W\" ? \"game-over\" : \"game-win\"}`}>\n              {gameOver === \"checkmate\"\n                ? turn === \"W\"\n                  ? \"You lost! üíÄ\"\n                  : \"You won! üéâ\"\n                : \"Stalemate! It's a draw ü§ù\"}\n            </div>\n          )}\n        </div>\n        {board.map((row, rIdx) =>\n          row.map((cell, cIdx) => (\n            <div\n              key={`${rIdx}-${cIdx}`}\n              className={`cell ${(rIdx + cIdx) % 2 === 0 ? \"light\" : \"dark\"} ${\n                legalMoves.some(([lr, lc]) => lr === rIdx && lc === cIdx)\n                  ? // ||\n                    // (selected?.length > 0 &&\n                    //   selected[0] === rIdx &&\n                    //   selected[1] === cIdx)\n                    \"highlight\"\n                  : \"\"\n              }`}\n              onClick={() => handleClick(rIdx, cIdx)}\n            >\n              {cell !== \".\" && (\n                <span\n                  className={`${\n                    isWhitePiece(cell) ? \"white-piece\" : \"black-piece\"\n                  } ${\n                    selected?.length > 0 &&\n                    selected[0] === rIdx &&\n                    selected[1] === cIdx\n                      ? \"selected-piece\"\n                      : \"\"\n                  }`}\n                >\n                  {cell}\n                </span>\n              )}\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}